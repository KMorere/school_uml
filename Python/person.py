import abc
from typing import ClassVar
from abc import ABC
from dataclasses import dataclass
import uuid
from Python.address import Address



@dataclass
class Person(ABC):
    """ An abstract class representing a real person.

     The Person abstract class will create a Person

     Attributes:
         id: autogenerated user uuid
         first_name
         last_name
         age
         address: an Adress Object with a City inside it
     """
    # class attributes `person` that stores everyone
    persons_list: ClassVar[list["Person"]]


    def __init__(self, first_name: str, last_name: str, age: int, address: Address):  #type: ignore
        """ Inits Person with provided data """
        self.first_name: str = first_name
        self.last_name: str = last_name
        self.age: int = age
        self.address: Address = address
        # self.planning: Planning = planning
        self.id: uuid.UUID = uuid.uuid4()


    def __post_init__(self):
        """ Add Person to `persons` list """
        Person.persons_list.append(self)


    @abc.abstractmethod
    def participate(self) -> None:
        """ This method will be implemented in Child classes """
        pass


    def __str__(self):
        return (f"Student: "
                f"\n[{self.first_name} {self.last_name}],"
                f"\n[{self.age} ans],"
                f"\n{self.address.__str__()},"
                )